# ë°ì´í„° ê°€ë“œ êµ¬í˜„

ì†Œìœ ì: ì˜ë‹ˆ

<aside>
ğŸ›¡ï¸ ë°ì´í„° ê°€ë“œ êµ¬í˜„

- Primary DB : ë‚˜ì˜ ì˜ë¬¸ ì´ë‹ˆì…œ DB(SHM DB)
- Standby DB : sbdb2
</aside>

---

# primary db êµ¬ì„± - ì˜ë¬¸ ì´ë‹ˆì…œ DB

1. ì˜¤ë¼í´ ì ‘ì†ì„ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ê°€ ë“¤ì–´ìˆëŠ” .bash_profileì„ ìˆ˜ì •í•œë‹¤.
    
    ```sql
    # ORACLE_SID ê°€ PRODë¡œ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— shm ìœ¼ë¡œ ë³€ê²½í•˜ê¸°
    
    [shm:~]$ vi .bash_profile
    -------------------
    :%s/PROD/shm/g
    -------------------
    [shm:~]$ source .bash_profile
    ```
    
    - ë³€ê²½ ì „
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled.png)
        
    - ë³€ê²½ í›„
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%201.png)
        

1. DBë¥¼ ìƒì„±í•  ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤.
    
    ```sql
    [shm:~]$ mkdir -p /u01/app/oracle/oradata/shm
    [shm:~]$
    [shm:~]$ ls -ld /u01/app/oracle/oradata/shm
    drwxr-xr-x 2 oracle oinstall 4096  3ì›” 14 16:50 /u01/app/oracle/oradata/shm
    [shm:~]$
    [shm:~]$ cd /u01/app/oracle/oradata/shm
    [shm:shm]$
    [shm:shm]$ mkdir disk1 disk2 disk3 disk4 disk5
    [shm:shm]$
    [shm:shm]$ ls
    disk1  disk2  disk3  disk4  disk5
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%202.png)
    

1. parameter file ì„ ë§Œë“ ë‹¤.
    1. parameter fileì„ ìƒì„±í•´ì•¼ nomount ë‹¨ê³„ë¡œ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆë‹¤. 
    
    ```sql
    #1. parameter fileì´ ìˆëŠ” ìœ„ì¹˜ë¡œ ì´ë™í•˜ì—¬, 
    -- spfileshm.oraì™€ initshm.oraê°€ ì—†ëŠ”ì§€ í™•ì¸(ìˆìœ¼ë©´ rmìœ¼ë¡œ ì§€ì›Œë²„ë¦¬ê¸°)
    [shm:shm]$ cd $ORACLE_HOME/dbs
    [shm:dbs]$
    [shm:dbs]$ pwd
    /u01/app/oracle/product/11.2.0/dbhome_1/dbs
    [shm:dbs]$
    [shm:dbs]$ ls
    arch1_7_1163599733.dbf  hc_DBUA0.dat  hc_shm.dat    initSBDB.ora  orapwSBDB      peshm_PROD_0  peshm_shm_0
    arch1_8_1163599733.dbf  hc_PROD.dat   hc_shm2.dat   lkPROD        parameter.sql  peshm_SBDB_0
    arch1_9_1163599733.dbf  hc_SBDB.dat   init.ora      lkSBDB        peshm_DBUA0_0  peshm_orcl_0
    demobld.sql             hc_orcl.dat   initPROD.ora  orapwPROD     peshm_DUMMY_0  peshm_shm2_0
    
    #2. ì—†ìœ¼ë©´ parameter file (pfile) ìƒì„±í•´ì£¼ê¸°
    [shm:dbs]$ 
    vi $ORACLE_HOME/dbs/initshm.ora
    
    ------------------------ì•„ë˜ ë‚´ìš© ë„£ê¸°---------------------------
    db_name = shm
    compatible=11.2.0.1.0
    
    sga_target = 256M
    
    undo_management = AUTO
    undo_tablespace = UNDOTBS
    
    processes = 100
    
    remote_login_passwordfile = EXCLUSIVE
     
    control_files = (/u01/app/oracle/oradata/shm/disk1/ctrl1.ctl ,
                     /u01/app/oracle/oradata/shm/disk2/ctrl2.ctl ,
                     /u01/app/oracle/oradata/shm/disk3/ctrl3.ctl)
                     
                     ~~/u01/app/oracle/flash_recovery_area/ctl4.ctl  )~~
    -> ì´ê±´ ë§Œë“¤ì–´ ë‘ë©´ ë‚˜ì¤‘ì— ë¶ˆí¸í•˜ê¸° ë•Œë¬¸ì— ì§€ì›Œë²„ë¦¼
    
    #3. catìœ¼ë¡œ initshm.ora ë‚´ìš© ì¶œë ¥í•˜ì—¬ ë‚´ìš©ì´ ì˜ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸
    
    [shm:dbs]$ cat $ORACLE_HOME/dbs/initshm.ora
    
    db_name = shm
    compatible=11.2.0.1.0
    
    sga_target = 256M
    
    undo_management = AUTO
    undo_tablespace = UNDOTBS
    
    processes = 100
    
    remote_login_passwordfile = EXCLUSIVE
    
    control_files = (/u01/app/oracle/oradata/shm/disk1/ctrl1.ctl ,
                     /u01/app/oracle/oradata/shm/disk2/ctrl2.ctl ,
                     /u01/app/oracle/oradata/shm/disk3/ctrl3.ctl)
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%203.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%204.png)
    
2. instance ë¥¼ nomount ë¡œ ì˜¬ë¦°ë‹¤.
    
    ```sql
    #1. ì•„ë˜ì™€ ê°™ì´ sysì— ì ‘ì†í•˜ê¸° 
    [shm:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 16:57:37 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to an idle instance.
    
    #2. startup nomountë¡œ ì˜¬ë¦½ë‹ˆë‹¤.(pfileì„ ì‚¬ìš©í•´ì„œ instance êµ¬ì„±)
    shm SYS > startup nomount pfile=$ORACLE_HOME/dbs/initshm.ora
    ORACLE instance started.
    
    Total System Global Area  267825152 bytes
    Fixed Size                  1335924 bytes
    Variable Size              92278156 bytes
    Database Buffers          167772160 bytes
    Redo Buffers                6438912 bytes
    
    #3. DB STARTUP ë‹¨ê³„ í™•ì¸í•˜ê¸° 
    shm SYS > select instance_name, status
      2     from v$instance;
    
    INSTANCE_NAME    STATUS
    ---------------- ------------
    shm              STARTED
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%205.png)
    

1. create database ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.
    - database ë¥¼ ìƒì„±í•œë‹¤ëŠ”ê²ƒì€ ì–´ë– í•œ íŒŒì¼ë“¤ì„ ìƒì„±í•˜ë©´ db ê°€ ìƒì„±ë˜ëŠ”
    ê²ƒì¸ê°€ ?
        1. data file
        2. controlfile
        3. redo log file
        4. parameter file
        5. archive log file
        6. password file
        
    - database ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë©´ ìœ„ì˜ íŒŒì¼ì¤‘ 3ê°€ì§€
    ê°€ ìƒì„±ëœë‹¤.
        1. data file
        2. controlfile
        3. redo logfile
    
    - DB ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•˜ê¸°
        - SI DBAê°€ DBë¥¼ ìƒì„±í•  ë•Œ ì •ì„ê³¼ ê°™ì€ ìŠ¤í¬ë¦½íŠ¸
    
    ```sql
    create database shm
    user sys identified by oracle
    user system identified by oracle
    datafile '/u01/app/oracle/oradata/shm/disk1/system01.dbf' 
    size 100M autoextend on maxsize unlimited extent management local
    sysaux 
    datafile '/u01/app/oracle/oradata/shm/disk2/sysaux01.dbf' 
    size 50M autoextend on maxsize unlimited
    default temporary tablespace temp
    tempfile '/u01/app/oracle/oradata/shm/disk3/temp01.dbf' 
    size 50M autoextend on maxsize unlimited
    undo tablespace undotbs
    datafile '/u01/app/oracle/oradata/shm/disk4/undotbs01.dbf' 
    size 50M autoextend on maxsize unlimited
    logfile 
    group 1 ('/u01/app/oracle/oradata/shm/disk4/redoG1M1.rdo',
            '/u01/app/oracle/oradata/shm/disk5/redoG1M2.rdo') size 100M,
    group 2 ('/u01/app/oracle/oradata/shm/disk4/redoG2M1.rdo',
            '/u01/app/oracle/oradata/shm/disk5/redoG2M2.rdo') size 100M,
    group 3 ('/u01/app/oracle/oradata/shm/disk4/redoG3M1.rdo',
            '/u01/app/oracle/oradata/shm/disk5/redoG3M2.rdo') size 100M,
    group 4 ('/u01/app/oracle/oradata/shm/disk4/redoG4M1.rdo',
            '/u01/app/oracle/oradata/shm/disk5/redoG4M2.rdo') size 100M,
    group 5 ('/u01/app/oracle/oradata/shm/disk4/redoG5M1.rdo',
             '/u01/app/oracle/oradata/shm/disk5/redoG5M2.rdo') size 100M;
             
             
    =============================
    ** autoextend on maxsize unlimited **
    ìµœì´ˆì˜ ì‚¬ì´ì¦ˆëŠ” 50M ì´ì§€ë§Œ, ë””ìŠ¤í¬ ê³µê°„ì´ í—ˆìš©í•  ë•Œ ê¹Œì§€ ë¬´í•œí•˜ê²Œ ëŠ˜ì–´ë‚  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê²ƒ. ìë™ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ê²Œ ë¨! 
    ë”°ë¼ì„œ í…Œì´ë¸” ìŠ¤í˜ì´ìŠ¤ ê³µê°„ ë¶€ì¡± ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒ(ì•ìœ¼ë¡œ ê³„ì†! ë””ìŠ¤í¬ê°€ í—ˆìš©í•œë‹¤ë©´!!)
    
    ** log file memberë¥¼ 2ê°œ ì”© êµ¬ì„±ì„ í•´ë‘ëŠ”ë°, ë””ìŠ¤í¬ë¥¼ ë‹¤ë¥¸ ê³³ì— ê°ê° ìƒì„± 
    (ë””ìŠ¤í¬ê°€ ê¹¨ì ¸ë„ ë¬¸ì œê°€ ìƒê¸°ì§€ ì•Šë„ë¡) **
    ```
    
    - DBë¥¼ ìƒì„±í•˜ë©´, data file, control file, redo log fileì´ í•¨ê»˜ ìƒì„±ë˜ì—ˆê¸° ë•Œë¬¸ì— DBê°€ OPENìœ¼ë¡œ ì˜¬ë¼ì˜¤ê²Œ ë¨. (startup ë˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  íŒŒì¼ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸)
    
    ```sql
    shm SYS > 
    select instance_name, status
      from v$instance;
    
    INSTANCE_NAME    STATUS
    ---------------- ------------
    PROD             OPEN
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%206.png)
    
    â‡’ DBCAë¡œ ë§Œë“ ë‹¤ë©´ Passwordë¥¼ ì…ë ¥í•˜ëŠ” ì°½ì´ ë‚˜ì˜¬ ê²ƒì´ì§€ë§Œ, ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•˜ê¸° ë•Œë¬¸ì— ì§ì ‘ ì´ê³³ì— ì…ë ¥í•´ì¤˜ì•¼í•¨ 
    
2. **data dictionary ë¥¼ ìƒì„±í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.**
    1. data dictionaryì™€ oracleì— í•„ìš”í•œ í•„ìˆ˜ íŒ¨í‚¤ì§€ ê°™ì€ ê²ƒì´ ì„¤ì¹˜ë¨. 
    
    ```sql
    shm SYS >
    @$ORACLE_HOME/rdbms/admin/catalog.sql
    
    @$ORACLE_HOME/rdbms/admin/catproc.sql
    
    connect system/oracle
    
    shm SYSTEM >
    @$ORACLE_HOME/sqlplus/admin/pupbld.sql 
    ```
    
    - ì²«ë²ˆì§¸ ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ ìº¡ì³ ì‚¬ì§„
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%207.png)
        
    - ë‘ë²ˆì§¸ ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ ìº¡ì³ ì‚¬ì§„
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%208.png)
        
    - ì„¸ë²ˆì§¸ ìŠ¤í¬ë¦½íŠ¸ ì¢…ë£Œ ìº¡ì³ ì‚¬ì§„
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%209.png)
        

1. shm DB ì— ìš´ì˜ DATA ìƒì„±
    1. - scott ê³„ì • ìƒì„±í•˜ê³   demobld ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.
        
        ```sql
        shm SYSTEM > connect / as sysdba
        Connected.
        shm SYS >
        shm SYS > create user scott
          identified by tiger;   2
        
        User created.
        
        shm SYS > grant dba to scott;
        
        Grant succeeded.
        
        shm SYS > connect scott/tiger
        Connected.
        shm SCOTT >
        shm SCOTT > @demobld -- emp í…Œì´ë¸”ê³¼ dept í…Œì´ë¸” êµ¬ì„±
        
        alter session set nls_Date_format='RR/MM/DD';
        
        Session altered.
        
        ... ì´í•˜ìƒëµ 
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2010.png)
        
    
    b.  sqlplus ì—ì„œ vi í¸ì§‘ê¸°ë¥¼ ì‹¤í–‰í• ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤.
    
    ```sql
    [shm:~]$ cd $ORACLE_HOME/sqlplus/admin
    [shm:admin]$
    [shm:admin]$ vi glogin.sql
    [shm:admin]$
    [shm:admin]$ pwd
    /u01/app/oracle/product/11.2.0/dbhome_1/sqlplus/admin
    
    --------ì•„ë˜ì˜ ë‚´ìš© ë„£ê±°ë‚˜ ìˆëŠ”ì§€ í™•ì¸---------
    define _editor='vi'
    set sqlprompt "_connect_identifier _user > "
    ----------------------------------------------
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2011.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2012.png)
    

# Standby DB êµ¬ì„± - SBDB2 DB êµ¬ì„±

Primary DBì—ì„œ Standby DBë¡œ archive log fileì„ ë³´ë‚´ì•¼í•˜ê¸° ë•Œë¬¸ì— archive log ìƒíƒœë¡œ ì„¤ì •í•´ì£¼ëŠ” ê²ƒ 

â–  Standby  DB êµ¬ì„± ë°©ë²•

1. standby DB ìƒì„±ì‹œ í•„ìš”í•œ í™˜ê²½ì„ Primary DB ì— ì„¤ì •í•´ì¤€ë‹¤.
2. Primary DB ì˜ íŒŒë¼ë¯¸í„° íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.
3. Standby DB ë¥¼ ìœ„í•œ Directory ë¥¼ ìƒì„±
4. ëª¨ë“  datafile ,temp file ì„ standby DB ë¡œ ì „ë‹¬
5. Primary DB ì—ì„œ standby DB ë¥¼ ìœ„í•œ controlfile ì„ ìƒì„±í•œí›„
ì „ë‹¬í•œë‹¤.

---

1. standby DB ìƒì„±ì‹œ í•„ìš”í•œ í™˜ê²½ì„ Primary DB ì— ì„¤ì •í•´ì¤€ë‹¤.
    - DataGuard ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ Primaryh DB ìª½ì— í•„ìš”í•œ í™˜ê²½ì„¤ì • 3ê°€ì§€
        
        1)  Password file ì¸ì¦ë°©ë²•ì´ì–´ì•¼í•œë‹¤.
        
        ```sql
        shm SYS > show parameter remote_login_passwordfile
        
        NAME                                 TYPE        VALUE
        ------------------------------------ ----------- ------------------------------
        remote_login_passwordfile            string      EXCLUSIVE
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2013.png)
        
        2) Archive log mode ì—¬ì•¼í•œë‹¤.
        
        ```sql
          SQL> archive log list
          SQL> shutdown immediate
          SQL> startup mount
          SQL> alter database archivelog;
          SQL> alter database open;
          SQL> archive log list
          
          -----------------------------
          
        
        shm SYS > archive log list
        Database log mode              No Archive Mode
        Automatic archival             Disabled
        Archive destination            /u01/app/oracle/product/11.2.0/dbhome_1/dbs/arch
        Oldest online log sequence     3
        Current log sequence           7
        
        shm SYS > shutdown immediate
        Database closed.
        Database dismounted.
        ORACLE instance shut down.
        
        shm SYS > startup mount
        ORACLE instance started.
        
        Total System Global Area  267825152 bytes
        Fixed Size                  1335924 bytes
        Variable Size              92278156 bytes
        Database Buffers          167772160 bytes
        Redo Buffers                6438912 bytes
        Database mounted.
        
        shm SYS > alter database archivelog;
        
        Database altered.
        
        shm SYS > alter database open;
        
        Database altered.
        
        shm SYS >
        shm SYS > archive log list
        Database log mode              Archive Mode
        Automatic archival             Enabled
        Archive destination            /u01/app/oracle/product/11.2.0/dbhome_1/dbs/arch
        Oldest online log sequence     3
        Next log sequence to archive   7
        Current log sequence           7
        
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2014.png)
        
        3) Force logging ì´ í™œì„±í™” ë˜ì–´ ìˆì–´ì•¼í•œë‹¤.( ë¬´ì¡°ê±´ log ì •ë³´ê°€ ìƒê¸°ê²Œ í•˜ê² ë‹¤)
        
        â‡’ ê·¸ë˜ì•¼ ëª¨ë“  log ì •ë³´ê°€ ë„˜ì–´ê°ˆ ìˆ˜ ìˆìŒ. 
        
        PRIMARY DBì—ì„œ ìˆ˜í–‰í•œ ëª¨ë“  DMLë¬¸ì¥ë“¤ì´ LOGì— ê¸°ë¡ì´ ë˜ê³  ì´ ì •ë³´ë¥¼ ARCHIVE LOG ì— ê¸°ë¡ë˜ì–´ STANDBY DBì— ë„˜ê¸°ê²Œ ë¨
        
        ```sql
        db ì „ì²´ì— ëŒ€í•´ì„œ ê°•ì œë¡œ log ì •ë³´ê°€ ìƒì„±ë˜ë„ë¡ ì„¤ì •í•´ì¤˜ì•¼í•œë‹¤.
        
         SQL>  alter database force logging;  
        
         SQL>  
         alter database add supplemental log data
           (primary key, unique  index) columns;
        
                 * primary db ì—ì„œ ìˆ˜í–‰í•œ dml ë¬¸ì¥ë“¤ì´ ì €ì¥ì´ëœë‹¤.
        
          SQL> alter system archive log current;
        
          SQL> alter system switch logfile;
        
          SQL> select name from v$archived_log;
        
          SQL> select FORCE_LOGGING from v$database;
          
          
        ----------- ìˆ˜í–‰í•´ë³´ê¸° ----------
        
        shm SYS > alter database force logging;
        
        Database altered.
        
        shm SYS > alter database add supplemental log data
           (primary key, unique  index) columns;  2
        
        Database altered.
        
        shm SYS >
        shm SYS > alter system archive log current;
        
        System altered.
        
        shm SYS > alter system switch logfile;
        
        System altered.
        
        shm SYS > select name from v$archived_log;
        
        NAME
        --------------------------------------------------------------------------------
        /u01/app/oracle/product/11.2.0/dbhome_1/dbs/arch1_7_1163610068.dbf
        /u01/app/oracle/product/11.2.0/dbhome_1/dbs/arch1_8_1163610068.dbf
        
        shm SYS > select FORCE_LOGGING from v$database;
        
        FOR
        ---
        YES
        
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2015.png)
        
        â‡’ YES ê°€ ë– ì•¼ ì •ìƒ 
        

1. Primary DB ì˜ íŒŒë¼ë¯¸í„° íŒŒì¼ì„ ìˆ˜ì •í•œë‹¤.
    
    ```sql
    $ cd $ORACLE_HOME/dbs
    $ vi initshm.ora
    ======================= ë‚´ìš© ì¶”ê°€í•˜ê¸° ========================
     # ë§¨ ì•„ë˜ìª½ì— ì•„ë˜ì˜ ë‚´ìš©ë“¤ì„ ì¶”ê°€í•œë‹¤.
     # ì•„ë˜ ë‚´ìš©ë“¤ì„ ì™¼ìª½ì— ê³µë°± ì—†ì´ ë”± ë¶™ì—¬ì„œ ì¶”ê°€í•˜ê¸° 
     # ì§€ê¸ˆë¶€í„°ëŠ” data guard ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•œ íŒŒë¼ë¯¸í„°ë“¤ì„ ì„¤ì • 
      
    db_unique_name=shm
    
     # standby db ìª½ì˜ db ì´ë¦„ë„ shm ì¼ê²ƒì´ë¯€ë¡œ 
     # primary db ìª½ì— db_unique_name ì„ shm ë¼ê³  ì…‹íŒ…í•´ì•¼í•œë‹¤. 
     
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    standby_file_management=auto
    
     # primary db ìª½ì—ì„œ í…Œì´ë¸” ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ë©´
     # standby db ìª½ì—ì„œë„ ë˜‘ê°™ì€ í…Œì´ë¸” ìŠ¤í˜ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ 
     # ë§Œë“¤ì–´ì§€ê²Œ í•˜ëŠ” íŒŒë¼ë¯¸í„° 
     # e.g íŒêµì—ì„œ í…Œì´ë¸” ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ë©´ ì›ì£¼ì—ì„œë„ ë™ì¼í•œ í…Œì´ë¸” ìŠ¤í˜ì´ìŠ¤ê°€ ìƒì„±ë˜ì–´ì•¼í•¨
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    db_file_name_convert='/home/oracle/SBDB2','/u01/app/oracle/oradata/shm'
                
    # Primary dbìª½ì—ëŠ” data file ì´ ì•„ë˜ì˜ ìœ„ì¹˜ì— ìˆê³  
     /u01/app/oracle/oradata/shm   <---- ì´ ìœ„ì¹˜ì— ìˆê³ 
    
     # Standby db ìª½ì—ëŠ” data file ì´ ì•„ë˜ì˜ ìœ„ì¹˜ì— ìˆë‹¤ëŠ” ê²ƒì„ ì˜¤ë¼í´ì—ê²Œ ì•Œë ¤ì¤Œ
     /home/oracle/SBDB2   <--------- ì´ ìœ„ì¹˜ì— ìˆë‹¤ëŠ”ê²ƒì„ ì•Œë ¤ì¤Œ
     
     í•­ìƒ primary dbê°€ ë’¤ì— ìˆê³  ì•ì— ì²« ì¸ìì— standby DBê°€ ìˆìŒ 
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    log_file_name_convert='/home/oracle/SBDB2','/u01/app/oracle/oradata/shm'
    
    # Primary dbìª½ì—ëŠ” redo log file ì´ 
     /u01/app/oracle/oradata/shm   <---- ì´ ìœ„ì¹˜ì— ìˆê³ 
    
    # Standby db ìª½ì—ëŠ” redo log file  ì´
     /home/oracle/SBDB2   <--------- ì´ ìœ„ì¹˜ì— ìˆë‹¤ëŠ”ê²ƒì„ ì•Œë ¤ì¤Œ */
    
    redo log fileì˜ ìœ„ì¹˜ë„ ì˜¤ë¼í´ì— ì•Œë ¤ì£¼ëŠ” ê²ƒ 
    
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    log_archive_dest_1='location=/home/oracle/shm/arch valid_for=(all_logfiles,all_roles)'
    
    # primary DB ìª½ì—ì„œ ìƒì„±ë  archive log fileì˜ ìœ„ì¹˜ë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒ
    -- primary DB ìª½ì˜ archive log fileì´ ì–´ë””ì— ìƒì„±ë˜ì–´ ìˆëŠ”ì§€ ì•Œë ¤ì£¼ëŠ” ì½”ë“œ (ìœ„ì¹˜ ì§€ì •)
    
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ì €ì¥í•˜ê³  ë‚˜ê°€ê¸°~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    [shm:~]$ mkdir shm
    mkdir: shm ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: íŒŒì¼ì´ ì¡´ì¬í•©ë‹ˆë‹¤
    [shm:~]$
    [shm:~]$ ls -ld shm
    drwxr-xr-x 2 oracle oinstall 4096  1ì›” 18 12:13 shm
    [shm:~]$
    [shm:~]$ mkdir arch
    
    $ pwd
    /home/oracle/shm/arch
    -- ì´ì œ ì´ ìœ„ì¹˜ì— archive log fileì´ ìƒì„±ë  ê²ƒ
    
    ë§Œì•½ì— ì´ë¯¸ ìˆìœ¼ë©´ arch ë””ë ‰í† ë¦¬ë§Œ ìƒì„±í•´ì£¼ë©´ ë¨
    
    ê·¸ë¦¬ê³  ë‹¤ì‹œ $ORACLE_HOME/dbs ë°‘ì— ìˆëŠ” initshm.oraë¥¼ ì—½ë‹ˆë‹¤.
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    # primary db ìª½ì— ì•„ì¹´ì´ë¸Œ ë¡œê·¸ íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ í•˜ë‚˜ ë” ìƒì„±í•¨
    # í•œì¤„ë¡œ ë„£ì–´ì£¼ê¸° 
    log_archive_dest_2='service=SBDB2 LGWR SYNC AFFIRM valid_for=(online_logfiles,primary_role)' 
       
     -- serviceë¥¼ ì“°ê³  SBDB2ë¼ëŠ” tns ë³„ì¹­ì„ ì‚¬ìš©í•˜ì—¬ 
     -- tns ë³„ì¹­ì— í•´ë‹¹í•˜ëŠ” DB ìª½ì— archive log fileì´ ë„˜ì–´ê°€ëŠ” ê²ƒ 
     primary dbìª½ì— log file ìœ„ì¹˜ í•˜ë‚˜ ë” ìƒì„±í•¨
    
    ì´ì œ standby DB ìª½ì— archive log fileì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë„˜ì–´ê°€ê²Œ ë¨ 
    
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    ë§Œì•½ì— STANDBY DBì˜€ë˜ ê²ƒì´ PRIMARY DBê°€ ë˜ëŠ” ìƒí™©ì´ ë˜ë©´ 
    ì•„ë˜ì˜ ì£¼ì„ë‹¬ë¦° ë‘ ì½”ë“œê°€ í•„ìš”í•¨
    ê·¸ë˜ì„œ ì£¼ì„ì„ ë‹¬ì•„ì„œ í˜¹ì‹œ ëª°ë¼ì„œ ë„£ì–´ë‘ .
    ì–¸ì œ ë‘ DB ë“¤ì´ switch ë ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ 
     # standby db ìª½ì— ìƒì„±í•  ì•„ì¹´ì´ë¸Œ ë¡œê·¸íŒŒì¼ì˜ ìœ„ì¹˜ 
    
    -----ì•„ë˜ì˜ ë‘ ì½”ë“œ ------
    #fal_server=SBDB2
    #fal_client=shm
    -------------------------
    
    # ë‚˜ì¤‘ì— primary db ê°€ standby db ê°€ ë ìˆ˜ìˆê¸° ë•Œë¬¸ì— ë¯¸ë¦¬ ì ì–´ë†“ì€ íŒŒë¼ë¯¸í„°
    
    ~~~~~~~~~~~~~~~~~~~~~~ë‹¤í–ˆìœ¼ë©´ ì €ì¥í•˜ê³  ë‚˜ì˜¤ê¸°! ~~~~~~~~~~~~~~~~~~~~~~~
    íŒŒë¼ë¯¸í„° íŒŒì¼ êµ¬ì„± ë!
    ```
    
    ```sql
    db_name = shm
    compatible=11.2.0.1.0
    
    sga_target = 256M
    
    undo_management = AUTO
    undo_tablespace = UNDOTBS
    
    processes = 100
    
    remote_login_passwordfile = EXCLUSIVE
    
    control_files = (/u01/app/oracle/oradata/shm/disk1/ctrl1.ctl ,
                     /u01/app/oracle/oradata/shm/disk2/ctrl2.ctl ,
                     /u01/app/oracle/oradata/shm/disk3/ctrl3.ctl)
    
    db_unique_name=shm
    standby_file_management=auto
    db_file_name_convert='/home/oracle/SBDB2','/u01/app/oracle/oradata/shm'
    log_file_name_convert='/home/oracle/SBDB2','/u01/app/oracle/oradata/shm'
    log_archive_dest_1='location=/home/oracle/shm/arch valid_for=(all_logfiles,all_roles)'
    log_archive_dest_2='service=SBDB2 LGWR SYNC AFFIRM valid_for=(online_logfiles,primary_role)'
    
    #fal_server=SBDB2
    #fal_client=shm
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2016.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2017.png)
    

1. Standby DB ë¥¼ ìœ„í•œ Directory ë¥¼ ìƒì„±
    1. primary DBì˜ datafileê³¼ control fileì„ standby DBì— ë°›ê¸°ë§Œ í•˜ë©´ ë¨(ë‹¨, ì›ê²© SCPë¡œ!)
    
    ```sql
    [shm:~]$ mkdir -p /home/oracle/SBDB2
    [shm:~]$
    [shm:~]$ ls -ld /home/oracle/SBDB2
    drwxr-xr-x 2 oracle oinstall 4096  3ì›” 14 17:55 /home/oracle/SBDB2
    ```
    
    â‡’ standby DB ìª½ì— ë°ì´í„° íŒŒì¼ê³¼ control fileì„ ë°›ì„ ë””ë ‰í† ë¦¬ ìƒì„±
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2018.png)
    

1. ëª¨ë“  datafile ,temp file ì„ standby DB ë¡œ ì „ë‹¬
    1. ë°˜ë“œì‹œ dbë¥¼ ì •ìƒ ì¢…ë£Œí•œ ë‹¤ìŒ ìˆ˜í–‰í•´ì•¼í•¨ 
        
        ```sql
        shm SYS > shutdown immediate
        Database closed.
        Database dismounted.
        ORACLE instance shut down.
        
        # ë””ë ‰í† ë¦¬ë¥¼ í†µì§¸ë¡œ ë„˜ê¸¸ ê²ƒì´ê¸° ë•Œë¬¸ì— -rpì˜µì…˜ì„ ì‚¬ìš©í•œë‹¤. 
        [shm:~]$ cp -rp /u01/app/oracle/oradata/shm/* /home/oracle/SBDB2
        [shm:~]$
        [shm:~]$ cd /home/oracle/SBDB2
        [shm:SBDB2]$
        [shm:SBDB2]$ ls
        disk1  disk2  disk3  disk4  disk5
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2019.png)
        

1. Primary db ìª½ì— ì•„ì¹´ì´ë¸Œ ë¡œê·¸ íŒŒì¼ê³¼ flasback database log ê°€ ì €ì¥ë  ìœ„ì¹˜ë¥¼ ìƒì„±í•˜ì‹œì˜¤ ~
    1. flashback database ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” 
    
    ```sql
    [shm:~]$ mkdir -p /home/oracle/shm/arch   <--- ì•„ì¹´ì´ë¸Œ ë¡œê·¸íŒŒì¼ ìœ„ì¹˜
    [shm:~]$ mkdir -p /home/oracle/shm/flash  <--  flashback database log ìœ„ì¹˜
    
    [shm:~]$ cd shm
    [shm:shm]$
    [shm:shm]$ ls
    arch     emp1.csv   emp2.csv  emp4.csv  emp6.csv  emp8.csv  emp_backup.csv  movies.csv   ratings.csv  users.csv
    emp.csv  emp10.csv  emp3.csv  emp5.csv  emp7.csv  emp9.csv  flash           movies2.csv  report.csv
    [shm:shm]$
    [shm:shm]$ ls -ld arch
    drwxr-xr-x 2 oracle oinstall 4096  3ì›” 14 17:58 arch
    [shm:shm]$
    [shm:shm]$ ls -ld flash
    drwxr-xr-x 2 oracle oinstall 4096  3ì›” 14 17:58 flash
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2020.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2021.png)
    

1. standby db ìª½ì— ì•„ì¹´ì´ë¸Œ ë¡œê·¸ íŒŒì¼ê³¼ flasback database log ê°€
ì €ì¥ë  ìœ„ì¹˜ë¥¼ ìƒì„±í•˜ì‹œì˜¤ ~
    
    ```sql
    $ mkdir -p /home/oracle/SBDB2/arch
    $ mkdir -p /home/oracle/SBDB2/flash
    
    ------------- ìˆ˜í–‰ --------------
    [shm:~]$ mkdir -p /home/oracle/SBDB2/arch
    [shm:~]$ mkdir -p /home/oracle/SBDB2/flash
    [shm:~]$
    [shm:~]$ cd SBDB2
    [shm:SBDB2]$
    [shm:SBDB2]$ ls
    arch  disk1  disk2  disk3  disk4  disk5  flash
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2022.png)
    

- Primary db ----------------------> standby db ë„˜ê²¨ì¤˜ì•¼í•  íŒŒì¼
    1. ëª¨ë“  datafile ë“¤
    2. tempfile
    3. redo log file
    4. standby ìš© controlfile --------------->

1. shm DB ë¥¼ mount ë¡œ ì˜¬ë¦¬ê³   standby ìš© controlfile ì„ ìƒì„±í•œë‹¤. - PRIMARY DBì—ì„œ ìƒì„±
    
    ```sql
    shm SYS > startup mount
    ORACLE instance started.
    
    Total System Global Area  267825152 bytes
    Fixed Size                  1335924 bytes
    Variable Size              92278156 bytes
    Database Buffers          167772160 bytes
    Redo Buffers                6438912 bytes
    Database mounted.
    
    shm SYS > alter database create standby controlfile
      as '$HOME/physical.ctl' reuse;  
    
    Database altered.
    
    -- reuseë¥¼ ì‚¬ìš©í•˜ì—¬ ë™ì¼í•œ control fileëª…ì´ ì¡´ì¬í•˜ë©´ ë®ì–´ì“°ë¼ëŠ” ì˜ë¯¸ì´ë‹¤. 
    -- $HOME = HOME ë°‘ì˜ ORACLE = /home/oracle
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2023.png)
    

1. Primary DB ìª½ì—ì„œ ìƒì„±í•œ standby ìš© controlfile ì„ Standby ìª½ìœ¼ë¡œ ë„˜ê²¨ì¤€ë‹¤.
    
    ```sql
    $ cp $HOME/physical.ctl /home/oracle/SBDB2/disk1/ctrl1.ctl
    $ cp $HOME/physical.ctl /home/oracle/SBDB2/disk2/ctrl2.ctl
    $ cp $HOME/physical.ctl /home/oracle/SBDB2/disk3/ctrl3.ctl
    
    ---------------------- ìˆ˜í–‰ ë° í™•ì¸ ------------------------
    [shm:~]$ cp $HOME/physical.ctl /home/oracle/SBDB2/disk1/ctrl1.ctl
    [shm:~]$ cp $HOME/physical.ctl /home/oracle/SBDB2/disk2/ctrl2.ctl
    [shm:~]$ cp $HOME/physical.ctl /home/oracle/SBDB2/disk3/ctrl3.ctl
    
    [shm:~]$ cd SBDB2
    [shm:SBDB2]$
    
    [shm:SBDB2]$ cd disk1
    [shm:disk1]$
    [shm:disk1]$ ls
    ctrl1.ctl  system01.dbf
    [shm:disk1]$
    [shm:disk1]$ cd ..
    [shm:SBDB2]$
    [shm:SBDB2]$ cd disk2
    [shm:disk2]$
    [shm:disk2]$ ls
    ctrl2.ctl  sysaux01.dbf
    [shm:disk2]$
    [shm:disk2]$ cd ..
    [shm:SBDB2]$
    [shm:SBDB2]$ cd disk3
    [shm:disk3]$
    [shm:disk3]$ ls
    ctrl3.ctl  temp01.dbf
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2024.png)
    
    ë°˜ë“œì‹œ controlfileì€ primary DBì—ì„œ standby dbìš© controlfileì„ ìƒì„±í•´ì¤˜ì•¼í•œë‹¤. 
    
    ì´ì œ standby dbì—ëŠ” datafileì™€ control fileì´ ì¡´ì¬í•¨ 
    

1. ë¦¬ìŠ¤ë„ˆê°€ ì¸ì‹í•˜ê³  ìˆëŠ” ì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•œë‹¤.
    1. ë™ì  ì„œë¹„ìŠ¤ ë“±ë¡ì„ ì •ì  ì„œë¹„ìŠ¤ ë“±ë¡ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    2. ë™ì  ì„œë¹„ìŠ¤ ë“±ë¡ì€ 11gì˜ ê²½ìš° PMONì´ ê·¸ ì´í›„ëŠ” LREGê°€ ì§ì ‘ ë¦¬ìŠ¤ë„ˆì—ê²Œ ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•´ì£¼ëŠ”ë°, ëŠë¦¼â€¦.
    3. ê·¸ë˜ì„œ ì •ì  ì„œë¹„ìŠ¤ ë“±ë¡ìœ¼ë¡œ í•´ì£¼ì–´ ë¹ ë¥´ê²Œ ë“±ë¡ë˜ë„ë¡ í•œë‹¤. 
    4. ë§Œì•½ ë™ì  ì„œë¹„ìŠ¤ ë“±ë¡ì´ë©´ ë°ì´í„° ê°€ë“œê°€ ì˜ ì•ˆë ìˆ˜ë„ ìˆì„ ê±¸..? 
    
    ```sql
    [shm:~]$ lsnrctl status
    
    LSNRCTL for Linux: Version 11.2.0.1.0 - Production on 14-MAR-2024 18:10:31
    
    Copyright (c) 1991, 2009, Oracle.  All rights reserved.
    
    Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.19.51)(PORT=1521)))
    STATUS of the LISTENER
    ------------------------
    Alias                     LISTENER
    Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
    Start Date                14-MAR-2024 15:28:41
    Uptime                    0 days 2 hr. 41 min. 49 sec
    Trace Level               off
    Security                  ON: Local OS Authentication
    SNMP                      OFF
    Listener Parameter File   /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
    Listener Log File         /u01/app/oracle/diag/tnslsnr/edydr1p0/listener/alert/log.xml
    Listening Endpoints Summary...
      (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.19.51)(PORT=1521)))
      (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
    Services Summary...
    Service "+ASM" has 1 instance(s).
      Instance "+ASM", status READY, has 1 handler(s) for this service...
    Service "PROD" has 2 instance(s).
      Instance "PROD", status UNKNOWN, has 1 handler(s) for this service...
      Instance "PROD", status READY, has 1 handler(s) for this service...
    Service "SBDB" has 2 instance(s).
      Instance "SBDB", status UNKNOWN, has 1 handler(s) for this service...
      Instance "SBDB", status READY, has 1 handler(s) for this service...
    Service "shm" has 1 instance(s).
      Instance "shm", status READY, has 1 handler(s) for this service...
    The command completed successfully
    
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    [shm:~]$ cd $ORACLE_HOME/network/admin
    [shm:admin]$
    [shm:admin]$ ls -l listener.ora
    -rw-r--r-- 1 oracle oinstall 436  3ì›” 14 15:28 listener.ora
    [shm:admin]$
    [shm:admin]$ mv listener.ora listener.bak
    [shm:admin]$
    [shm:admin]$ ls listener.*
    listener.bak
    
    # ì´ë¦„ ë³€ê²½í•´ë‘ê³ (backup ë³¸ ë§Œë“¤ì–´ë‘ê³  ìƒˆë¡­ê²Œ listener.oraë¥¼ êµ¬ì„±í•  ê²ƒ)
    [shm:admin]$ vi listener.ora
    [shm:admin]$
    
    -------------------------ì•„ë˜ì˜ ë‚´ìš© ì…ë ¥ ---------------------------
    LISTENER =
      (DESCRIPTION_LIST =
        (DESCRIPTION =
          (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.19.51)(PORT = 1521))
          (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
        )
      )
    
    SID_LIST_LISTENER=
      (SID_LIST =
        (SID_DESC =
          (ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1)
          (SID_NAME=shm)
         )
        (SID_DESC =
          (ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1)
          (SID_NAME=SBDB2)
         )
       )
     -------------------------------------------------------------
       
    [shm:admin]$ ls
    listener.bak  listener.ora  samples  shrept.lst  sqlnet.ora  tnsnames.ora
    
     $ lsnrctl  stop
     $ lsnrctl  start
    
    [shm:admin]$ lsnrctl start
    
    LSNRCTL for Linux: Version 11.2.0.1.0 - Production on 14-MAR-2024 18:18:37
    
    Copyright (c) 1991, 2009, Oracle.  All rights reserved.
    
    Starting /u01/app/oracle/product/11.2.0/dbhome_1/bin/tnslsnr: please wait...
    
    TNSLSNR for Linux: Version 11.2.0.1.0 - Production
    System parameter file is /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
    Log messages written to /u01/app/oracle/diag/tnslsnr/edydr1p0/listener/alert/log.xml
    Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.19.51)(PORT=1521)))
    Listening on: (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
    
    Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=192.168.19.51)(PORT=1521)))
    STATUS of the LISTENER
    ------------------------
    Alias                     LISTENER
    Version                   TNSLSNR for Linux: Version 11.2.0.1.0 - Production
    Start Date                14-MAR-2024 18:18:37
    Uptime                    0 days 0 hr. 0 min. 0 sec
    Trace Level               off
    Security                  ON: Local OS Authentication
    SNMP                      OFF
    Listener Parameter File   /u01/app/oracle/product/11.2.0/dbhome_1/network/admin/listener.ora
    Listener Log File         /u01/app/oracle/diag/tnslsnr/edydr1p0/listener/alert/log.xml
    Listening Endpoints Summary...
      (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=192.168.19.51)(PORT=1521)))
      (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(KEY=EXTPROC1521)))
    Services Summary...
    Service "SBDB2" has 1 instance(s).
      Instance "SBDB2", status UNKNOWN, has 1 handler(s) for this service...
    Service "shm" has 1 instance(s).
      Instance "shm", status UNKNOWN, has 1 handler(s) for this service...
    The command completed successfully
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2025.png)
    
    â‡’ lsnrctl start í•˜ìë§ˆì  ë°”ë¡œ serviceê°€ ë“±ë¡ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    
    ë¦¬ìŠ¤ë„ˆê°€ ì„œë¹„ìŠ¤ 2ê°œë¥¼ ì˜ ì¸ì‹í•˜ëŠ”ì§€ í™•ì¸ ì™„ë£Œ 
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2026.png)
    
    ![ìŠ¤í¬ë¦°ìƒ· 2024-03-14 182010.png](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/%25EC%258A%25A4%25ED%2581%25AC%25EB%25A6%25B0%25EC%2583%25B7_2024-03-14_182010.png)
    

1. tnsnames.ora íŒŒì¼ì˜ ì•„ë˜ì˜ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.
    
    ```sql
    [shm:~]$ cd $ORACLE_HOME/network/admin
    [shm:admin]$ vi tnsnames.ora
    
    ----------------- ì¤‘ë³µëœ ê²ƒì´ ì—†ëŠ”ì§€ í™•ì¸í•˜ê³  ë„£ê¸° -------------------
    shm =
      (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.19.51)(PORT = 1521))
        (CONNECT_DATA =
          (SERVER = DEDICATED)
          (SERVICE_NAME = shm)
        )
      )
    
    SBDB2 =
      (DESCRIPTION =
        (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.19.51)(PORT = 1521))
        (CONNECT_DATA =
          (SERVER = DEDICATED)
          (SERVICE_NAME = SBDB2)
        )
      )
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2027.png)
    

1. shm ì™€ SBDB2 ë¥¼ ìœ„í•œ íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ ìƒì„±
    1. ì›ê²©ì—ì„œ ìœ ì €ë¥¼ í†µí•´ì„œ sysì— ì ‘ì†í•˜ë ¤ë©´ ë°˜ë“œì‹œ password fileì´ ìˆì–´ì•¼í•¨. 
    2. sysìœ ì €ê°€ listener ë¥¼ í†µí•´ì„œ ì›ê²©ì—ì„œ ì ‘ì†í•˜ë ¤ë©´ ë°˜ë“œì‹œ password fileì´ ìˆì–´ì•¼í•¨. 
    3. ì§€ì—­ì´ ì„œë¡œ ë©€ê¸° ë•Œë¬¸ì— ì›ê²©ìœ¼ë¡œ ì ‘ì†í•´ì•¼í•˜ëŠ” ê²ƒ. 
    4. ì„œë¡œ sysìœ ì €ë¡œ ì ‘ì†í•˜ê¸° ìœ„í•´ì„œ password file ìƒì„±
    5. sysìœ ì €ì˜ passwordë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ì„œ password fileì„ ìƒì„±í•˜ê¸°ë„ í•˜ì§€ë§Œ ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ ìƒì„±í•˜ê¸°ë„ í•¨ 
    
    ```sql
    [shm:admin]$ cd $ORACLE_HOME/dbs
    [shm:dbs]$
    [shm:dbs]$ pwd
    /u01/app/oracle/product/11.2.0/dbhome_1/dbs
    [shm:dbs]$
    [shm:dbs]$ orapwd file=orapwSBDB2 password=oracle ignorecase=Y
    [shm:dbs]$ orapwd file=orapwshm password=oracle ignorecase=Y
    [shm:dbs]$ ls orapw*
    orapwPROD  orapwSBDB  orapwSBDB2  orapwshm
    ```
    
    - ì„¤ëª… :  íŒ¨ìŠ¤ì›Œë“œíŒŒì¼ì„ ìƒì„±í•˜ëŠ” ì´ìœ ëŠ” ì›ê²©ì—ì„œ ë¦¬ìŠ¤ë„ˆ í†µí•´ì„œ sys ìœ ì ¸ë¡œ ì ‘ì†í•˜ë ¤ê³  ìƒì„±
    - orapwd : íŒ¨ìŠ¤ì›Œë“œ íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ìœ í‹¸ë¦¬í‹°
    - ignorecase=Y ëŠ” íŒ¨ìŠ¤ì›Œë“œ oracle ì„ ëŒ€ë¬¸ìë¡œ ì“°ë“  ì†Œë¬¸ìë¡œ ì“°ë“  ìƒê´€ì—†ì´ ì ‘ì†í•˜ê²Œ í•˜ê² ë‹¤.
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2028.png)
    

1. ìœ„ì—ì„œ êµ¬ì„±í•œ nework ì„¤ì •ì´ ì •ìƒì¸ì§€ í™•ì¸í•˜ì‹œì˜¤ ~
    1. ë¦¬ìŠ¤ë„ˆë¥¼ í†µí•´ì„œ sysìœ ì €ë¡œ ì ‘ì†í•´ë³´ëŠ” ê²ƒ (ëŒ€ì†Œë¬¸ì ìƒê´€ ì—†ì´ ì ‘ì†í•´ë³´ê¸°)
    2. 4ê°œë¥¼ ì ‘ì†í•´ë³´ê³  ì•„ë¬´ ë¬¸ì œê°€ ì—†ìœ¼ë©´ ì§€ê¸ˆê¹Œì§€ ì˜ ì„¤ì • í•œ ê²ƒ 
    
    ```sql
     $ sqlplus sys/oracle@prod as sysdba
     $ sqlplus sys/ORACLE@prod as sysdba
     $ sqlplus sys/oracle@sbdb as sysdba
     $ sqlplus sys/ORACLE@sbdb as sysdba
     
     
     --------------í•´ë³´ê¸° --------------
     
    [shm:~]$ sqlplus sys/oracle@prod as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:24:33 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    prod SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sqlplus sys/ORACLE@prod as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:24:41 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    prod SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sqlplus sys/oracle@sbdb as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:24:51 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    sbdb SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sqlplus sys/ORACLE@sbdb as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:24:58 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    sbdb SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2029.png)
    

1. `.bash_profile` ì„ ì—´ì–´ì„œ shm ì™€ SBDB2 ë¡œ ì ‘ê·¼í•˜ê¸° ìœ„í•œ alias ë¥¼ ìƒì„±í•œë‹¤.
    
    ```sql
    [shm:~]$ vi .bash_profile
    
    ----------------ì•„ë˜ì˜ ë‚´ìš© ì¶”ê°€ --------------
    alias shm='export ORACLE_SID=shm'
    alias sbdb2='export ORACLE_SID=SBDB2'
    -----------------------------------------------
    [shm:~]$ source .bash_profile
    [shm:~]$
    [shm:~]$ shm
    [shm:~]$
    [shm:~]$ sbdb2
    [SBDB2:~]$
    [SBDB2:~]$ shm
    [shm:~]$
    [shm:~]$ sbdb2
    
       $ prod
       $ sqlplus / as  sysdba
    
      SQL> select instance_name, status from v$instance;
      -- ì´ë¯¸ mountì—¬ë„ ë‚´ë ¸ë‹¤ ì˜¬ë¦¬ê¸° 
      SQL> shutdown immediate
      SQL> startup mount 
    
    ----- ì‹¤í–‰í•´ë³´ê¸° -----
    
    [SBDB2:~]$ shm
    [shm:~]$
    [shm:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:28:04 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    shm SYS >
    shm SYS > select instance_name, status from v$instance;
    
    INSTANCE_NAME    STATUS
    ---------------- ------------
    shm              MOUNTED
    
    shm SYS > shutdown immediate
    ORA-01109: database not open
    
    Database dismounted.
    ORACLE instance shut down.
    shm SYS > startup mount
    ORACLE instance started.
    
    Total System Global Area  267825152 bytes
    Fixed Size                  1335924 bytes
    Variable Size              92278156 bytes
    Database Buffers          167772160 bytes
    Redo Buffers                6438912 bytes
    Database mounted.
    shm SYS > select instance_name, status from v$instance;
    
    INSTANCE_NAME    STATUS
    ---------------- ------------
    shm              MOUNTED
    
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2030.png)
    
    ![ìŠ¤í¬ë¦°ìƒ· 2024-03-14 182619.png](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/%25EC%258A%25A4%25ED%2581%25AC%25EB%25A6%25B0%25EC%2583%25B7_2024-03-14_182619.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2031.png)
    

1. SBDB ìš© íŒŒë¼ë¯¸í„° íŒŒì¼ êµ¬ì„± - ìƒˆë¡œì´ ìƒì„±í•˜ëŠ” ê²ƒ
    
    ```sql
    [PROD:~]$ cd $ORACLE_HOME/dbs
    [PROD:dbs]$
    [PROD:dbs]$ vi initSBDB2.ora
    
    -------------------- ì•„ë˜ì˜ ë‚´ìš© ì¶”ê°€ ---------------------
    
    compatible=11.2.0.1.0
    control_files = (/home/oracle/SBDB2/disk1/ctrl1.ctl ,
                     /home/oracle/SBDB2/disk2/ctrl2.ctl ,
                     /home/oracle/SBDB2/disk3/ctrl3.ctl )
    db_block_size=8192
    db_name=shm
    service_names=SBDB2
    global_names=true
    job_queue_processes=10
    open_cursors=500
    processes=100
    remote_login_passwordfile='EXCLUSIVE'
    sga_max_size=120M
    sga_target=120M
    undo_management='AUTO'
    undo_tablespace='UNDOTBS'
    db_recovery_file_dest_size=4G
    db_recovery_file_dest=/home/oracle/SBDB2/flash
    db_unique_name=SBDB2
    standby_file_management=auto
    db_file_name_convert='/u01/app/oracle/oradata/shm','/home/oracle/SBDB2'
    log_file_name_convert='/u01/app/oracle/oradata/shm','/home/oracle/SBDB2'
    log_archive_dest_1='location=/home/oracle/SBDB2/arch valid_for=(all_logfiles, all_roles)'
    log_archive_dest_2='service=shm LGWR SYNC AFFIRM valid_for=(online_logfiles, primary_role)'
    #standby_archive_dest=/home/oracle/SBDB2/arch
    #recovery_parallelism=4
    fal_server=shm
    fal_client=SBDB2
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2032.png)
    
    **â€» standby DB ìª½ì—ì„œ ë°˜ë“œì‹œ í™œì„±í™” ë˜ì–´ì ¸ì•¼í•˜ëŠ” íŒŒë¼ë¯¸í„°**
    
    1. fal_server=shm (Primary DB)----> ì•„ì¹´ì´ë¸Œ ë¡œê·¸íŒŒì¼ì„ ë³´ë‚´ì¤˜ì•¼í•˜ëŠ” DB
    2. fal_client=SBDB2(Standby DB)----> ì•„ì¹´ì´ë¸Œ ë¡œê·¸íŒŒì¼ì„ ë°›ì•„ì•¼í•˜ëŠ” DB
    
    ```sql
    	shm --------------------------------------> SBDB2
    								 archive  log  file
    ```
    

1. standby ìš© redo log file ì„ shm ì™€ SBDB2 ì—ì„œ ê°ê° ìƒì„±
    1. shm DB
        
        ```sql
        alter database add standby logfile
         '/u01/app/oracle/oradata/shm/disk1/standby01.log' size 10m;
        
        alter database add standby logfile
         '/u01/app/oracle/oradata/shm/disk1/standby02.log' size 10m;
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2033.png)
        
    2. SBDB2 DB
        
        ```sql
        [PROD:~]$ sbdb
        [SBDB:~]$
        [SBDB:~]$ sqlplus / as sysdba
        
        SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 16:06:43 2024
        
        Copyright (c) 1982, 2009, Oracle.  All rights reserved.
        
        Connected to an idle instance.
        
        SBDB SYS > startup
        ORACLE instance started.
        
        Total System Global Area  125538304 bytes
        Fixed Size                  1334968 bytes
        Variable Size              75497800 bytes
        Database Buffers           41943040 bytes
        Redo Buffers                6762496 bytes
        Database mounted.
        Database opened.
        SBDB SYS >
        SBDB SYS > 
        
        alter database add standby logfile
         '/home/oracle/SBDB2/disk1/standby01.log' size 10m;
        
        alter database add standby logfile
         '/home/oracle/SBDB2/disk1/standby02.log' size 10m;
        
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2034.png)
        

1. shm ì™€ SBDB2 ì˜ PMON ì´ ì˜ ë– ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
    1. ì›ì£¼ì— ìˆëŠ” dbëŠ” ì´ì œ í•­ìƒ ë³µêµ¬ë§Œ í•˜ê³  ìˆëŠ” dbê°€ ë˜ëŠ” ê²ƒ
        
        ```sql
        [SBDB2:~]$ ps -ef | grep pmon
        oracle    5297     1  0 10:22 ?        00:00:05 asm_pmon_+ASM
        oracle   23728     1  0 15:59 ?        00:00:01 ora_pmon_PROD
        oracle   23898     1  0 16:11 ?        00:00:01 ora_pmon_SBDB
        oracle   25180     1  0 18:28 ?        00:00:00 ora_pmon_shm
        oracle   25271     1  0 18:34 ?        00:00:00 ora_pmon_SBDB2
        oracle   25331 29987  0 18:35 pts/4    00:00:00 grep pmon
        
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2035.png)
        

### ----- ì—¬ê¸°ì„œ ë¶€í„°ê°€ ì¤‘ìš” (sbdb2 ë¥¼ ë³µêµ¬ëª¨ë“œë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…)

1. standby ë””ë¹„ì¸ SBDB2 ë¥¼ ë³µêµ¬ëª¨ë“œë¡œ ë³€í™˜í•œë‹¤.
    
    ```sql
     - SBDB2 ì—ì„œ ìˆ˜í–‰í•œë‹¤.
    
      SQL> shutdown  immediate
      SQL> startup  mount
    
      SQL> alter database flashback on;
    
     -- MRP(Media Recovery Process) ê°€ ë– ìˆëŠ”ì§€ í™•ì¸í•˜ê¸°ìœ„í•´ ì•„ë˜ì˜ ì‘ì—…ìˆ˜í–‰
    
      SQL> select process, status from v$managed_standby;
    
                     <---- MRP ê°€ ì§€ê¸ˆì€ ì•„ì§ ì•ˆëœ¬ë‹¤.
    
     -- ë³µêµ¬ëª¨ë“œë¡œ ë³€í™˜í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.
    
      SQL> recover managed standby database disconnect;
    
    -- ë‹¤ì‹œ MRP ê°€ ë– ìˆëŠ”ì§€ í™•ì¸í•œë‹¤. 
      SQL> select process, status from v$managed_standby;
    
                     <---- MRP ê°€ ì§€ê¸ˆ ëœ¬ë‹¤.
                     
    ~~~~~~ ì‹¤ìŠµí•´ë³´ê¸° ~~~~~~~~
    
    SBDB2 SYS > shutdown immediate
    Database closed.
    Database dismounted.
    ORACLE instance shut down.
    SBDB2 SYS >
    SBDB2 SYS > startup mount
    ORACLE instance started.
    
    Total System Global Area  125538304 bytes
    Fixed Size                  1334968 bytes
    Variable Size              75497800 bytes
    Database Buffers           41943040 bytes
    Redo Buffers                6762496 bytes
    Database mounted.
    SBDB2 SYS >
    SBDB2 SYS > select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    
    SBDB2 SYS >
    SBDB2 SYS > recover managed standby database disconnect;
    Media recovery complete.
    SBDB2 SYS >
    SBDB2 SYS > select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    MRP0      WAIT_FOR_LOG
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2036.png)
    

1. shm ì™€ SBDB2 ìª½ì—ì„œ ê°ê° ì•„ë˜ì˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•´ì„œ datafile ì˜ ê°¯ìˆ˜ê°€ ë˜‘ê°™ì€ì§€ í™•ì¸ (ê°ê° 3ê°œì”© ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•´ì•¼í•¨!!)
    1. SBDB2 DB
        
        ```sql
        SBDB2 SYS > select name from v$datafile;
        
        NAME
        --------------------------------------------------------------------------------
        /home/oracle/SBDB2/disk1/system01.dbf
        /home/oracle/SBDB2/disk2/sysaux01.dbf
        /home/oracle/SBDB2/disk4/undotbs01.dbf
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2037.png)
        
    2. shm DB
        
        ```sql
        [SBDB2:~]$ shm
        [shm:~]$
        [shm:~]$ sqlplus / as sysdba
        
        SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:39:15 2024
        
        Copyright (c) 1982, 2009, Oracle.  All rights reserved.
        
        Connected to:
        Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
        With the Partitioning, OLAP, Data Mining and Real Application Testing options
        
        shm SYS >
        shm SYS > select name from v$datafile;
        
        NAME
        --------------------------------------------------------------------------------
        /u01/app/oracle/oradata/shm/disk1/system01.dbf
        /u01/app/oracle/oradata/shm/disk2/sysaux01.dbf
        /u01/app/oracle/oradata/shm/disk4/undotbs01.dbf
        
        ```
        
        ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2038.png)
        

1. shm ìª½ db ë¥¼ ì˜¬ë¦¬ê³  í…Œì´ë¸”ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ standby db ë¡œ ë„˜ì–´ê°€ì„œ ë°˜ì˜ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.
    1. ì£¼ì˜ : SBDB2ëŠ” mount ìƒíƒœì—¬ì•¼í•¨ 
    
    ```sql
     - shm
    
    SQL> alter database open;
    
    SQL> 
    create tablespace ts9000
      datafile '/u01/app/oracle/oradata/shm/disk2/ts900.dbf' size 10m;
      
    ~~~~~~~~~~~~~~~~~~~~~~~~ ì‹¤ìŠµ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    shm SYS > alter database open;
    
    Database altered.
    
    shm SYS >
    shm SYS > create tablespace ts9000
      datafile '/u01/app/oracle/oradata/shm/disk2/ts900.dbf' size 10m;  2
    
    Tablespace created.
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2039.png)
    

1. ì•„ë˜ì˜ ì‘ì—…ì„ ì–‘ìª½ì—ì„œ ê°ê° ìˆ˜í–‰í•œë‹¤.
    
    ```sql
      - shm
    
        select name from v$datafile;
    
      - SBDB2  
     
        select name from v$datafile;
    
        
    # ê³„ì† ì•ˆëœ¨ë©´ MRPê°€ ëœ¨ëŠ”ì§€ í™•ì¸í•´ë³´ê¸° 
    
    SQL> select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH	  CLOSING
    ARCH	  CONNECTED
    ARCH	  CONNECTED
    ARCH	  CONNECTED
    MRP0	  WAIT_FOR_LOG   --->  ì•„ì¹´ì´ë¸Œëœ ë¦¬ë‘ì •ë³´ë¥¼ standby db ì ìš©
    RFS	  IDLE    (Remote File Server) ---> Primary db ë¡œ ë¶€í„°
    RFS	  IDLE                             ë¦¬ë‘ì •ë³´ë¥¼ ìˆ˜ì‹ í•˜ê³  ë¦¬ë‘ë¥¼
    RFS	  IDLE                             standby db ì˜ ë¦¬ë‘ë¡œê·¸ì™€
                                               ì•„ì¹´ì´ë¸Œ ë¦¬ë‘ë¡œê·¸ì— ì§ì ‘ê¸°ë¡
                                               í•˜ëŠ” í”„ë¡œì„¸ì„œ 
    
    - primary db
    
    SQL> 
    select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH	  CLOSING
    ARCH	  CONNECTED
    ARCH	  CLOSING
    ARCH	  CLOSING
    LGWR	  WRITING
    
    ê·¸ë˜ë„ ì•ˆë§Œë“¤ì–´ì§€ë©´ shm DBì—ì„œ alter system switch log fileì„ í•´ì£¼ì–´ 
    log switchë¥¼ ì¼ìœ¼í‚¨ í›„ checkpointë¥¼ ì¼ìœ¼í‚¨ ë‹¤ìŒì— ë‹¤ì‹œ SBSB2 ìª½ìœ¼ë¡œ ê°€ì„œ 
    select name from v$datafile; ì„ í•˜ë©´ 
    archive log fileì´ ë„˜ì–´ê°„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    â‡’ ì¦‰, ì•ˆë˜ì—ˆì„ ê²½ìš° archive log fileì„ ë§Œë“  ê²ƒ 
    
    - shm dbë¡œ ì´ë™ í›„ ìˆ˜í–‰
    
    [SBDB2:~]$ shm
    [shm:~]$
    [shm:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:43:04 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    shm SYS >
    shm SYS > alter system switch logfile;
    
    System altered.
    
    shm SYS > alter system checkpoint;
    
    System altered.
    
    shm SYS >
    shm SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sbdb2
    [SBDB2:~]$
    [SBDB2:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:43:33 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    SBDB2 SYS >
    SBDB2 SYS > select name from v$datafile;
    
    NAME
    --------------------------------------------------------------------------------
    /home/oracle/SBDB2/disk1/system01.dbf
    /home/oracle/SBDB2/disk2/sysaux01.dbf
    /home/oracle/SBDB2/disk4/undotbs01.dbf
    /home/oracle/SBDB2/disk2/ts900.dbf
    
    ~~~~~~~~~~~~~~~~~~~~~~~~ ì‹¤ìŠµ ~~~~~~~~~~~~~~~~~~~~~~~~~~
    
    shm SYS > create tablespace ts9000
      datafile '/u01/app/oracle/oradata/shm/disk2/ts900.dbf' size 10m;  2
    
    Tablespace created.
    
    shm SYS > select name from v$datafile;
    
    NAME
    --------------------------------------------------------------------------------
    /u01/app/oracle/oradata/shm/disk1/system01.dbf
    /u01/app/oracle/oradata/shm/disk2/sysaux01.dbf
    /u01/app/oracle/oradata/shm/disk4/undotbs01.dbf
    /u01/app/oracle/oradata/shm/disk2/ts900.dbf
    
    shm SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sbdb2
    [SBDB2:~]$
    [SBDB2:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:41:29 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    SBDB2 SYS >
    SBDB2 SYS > select name from v$datafile;
    
    NAME
    --------------------------------------------------------------------------------
    /home/oracle/SBDB2/disk1/system01.dbf
    /home/oracle/SBDB2/disk2/sysaux01.dbf
    /home/oracle/SBDB2/disk4/undotbs01.dbf
    
    SBDB2 SYS >
    SBDB2 SYS > select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CLOSING
    MRP0      WAIT_FOR_LOG
    RFS       IDLE
    RFS       IDLE
    
    7 rows selected.
    
    SBDB2 SYS > select process, status from v$managed_standby;
    
    PROCESS   STATUS
    --------- ------------
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CONNECTED
    ARCH      CLOSING
    MRP0      WAIT_FOR_LOG
    RFS       IDLE
    RFS       IDLE
    
    7 rows selected.
    
    SBDB2 SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [SBDB2:~]$
    [SBDB2:~]$ shm
    [shm:~]$
    [shm:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:43:04 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    shm SYS >
    shm SYS > alter system switch logfile;
    
    System altered.
    
    shm SYS > alter system checkpoint;
    
    System altered.
    
    shm SYS >
    shm SYS > exit
    Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    [shm:~]$
    [shm:~]$ sbdb2
    [SBDB2:~]$
    [SBDB2:~]$ sqlplus / as sysdba
    
    SQL*Plus: Release 11.2.0.1.0 Production on Thu Mar 14 18:43:33 2024
    
    Copyright (c) 1982, 2009, Oracle.  All rights reserved.
    
    Connected to:
    Oracle Database 11g Enterprise Edition Release 11.2.0.1.0 - Production
    With the Partitioning, OLAP, Data Mining and Real Application Testing options
    
    SBDB2 SYS >
    SBDB2 SYS > select name from v$datafile;
    
    NAME
    --------------------------------------------------------------------------------
    /home/oracle/SBDB2/disk1/system01.dbf
    /home/oracle/SBDB2/disk2/sysaux01.dbf
    /home/oracle/SBDB2/disk4/undotbs01.dbf
    /home/oracle/SBDB2/disk2/ts900.dbf
    ```
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2040.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2041.png)
    
    ![Untitled](%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%80%E1%85%A1%E1%84%83%E1%85%B3%20%E1%84%80%E1%85%AE%E1%84%92%E1%85%A7%E1%86%AB%2092ef2911605a44959cb941cb36ff740f/Untitled%2042.png)
    
    > **LNS (Logwrite network Server)** ~> ë¦¬ë‘ë¥¼ standby db ì˜ RFS ì—ê²Œ ë³´ë‚¸ë‹¤
    
       Primary  db  ---------------------> Standby  db
    
      ARCH                                  ARCH
      LGWR                                  RFS
      LNS                                   MRP
    >